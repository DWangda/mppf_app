<div class="ion-page" id="main-content">
  <ion-header style="border: 0; background: transparent">
    <ion-toolbar
      border="none"
      style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-direction: row;
      "
    >
      <ion-buttons slot="start">
        <ion-back-button defaultHref="/home"></ion-back-button>
      </ion-buttons>
      <ion-title>
        <img class="logo" src="assets/header-logo.png" alt="logo" />
      </ion-title>
      <ion-buttons slot="end">
        <ion-button disabled="true"> </ion-button>
        <ion-button disabled="true"> </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content [fullscreen]="true" class="ion-padding">
    <!-- ────── QR SCAN (WELCOME REMOVED) ────── -->
    <div class="scan-container">
      <div
        style="
          padding: 0;
          margin: 0;
          display: flex;
          justify-content: center;
          align-items: center;
          color: #000;
        "
      >
        <h2
          style="
            font-size: 18px;
            font: semi-bold;
            padding: 0;
            color: #000;
            margin: 0;
            font-weight: 600;
          "
        >
          Liveliness with
          <span
            style="
              font-size: 18px;
              font: semi-bold;
              color: green;
              font-weight: 600;
            "
            >Bhutan&nbsp;NDI</span
          >
          Wallet
        </h2>
      </div>

      <ion-button
        expand="block"
        style="padding-top: 30px; --background: #28c27d"
        class="ion-margin-bottom ion-hide-md-up"
        (click)="openDeeplink()"
      >
        Open Bhutan&nbsp;NDI Wallet
      </ion-button>

      <div class="line-with-text">
        <span>OR</span>
      </div>

      <div class="ion-text-center">
        <!-- QR area -->
        <div class="qrcode-box ion-margin" *ngIf="!denied; else deniedTpl">
          <qrcode
            class="my-qr"
            [qrdata]="proofRequestUrl"
            [width]="160"
            [errorCorrectionLevel]="'M'"
          ></qrcode>
        </div>

        <ion-list lines="none" style="margin: 0">
          <ol style="margin: 0">
            <li style="text-align: left">
              Open Bhutan&nbsp;NDI Wallet on your phone
            </li>
            <li style="text-align: left">
              Tap the Scan button
              <img src="assets/ndi/scaniconimg.svg" alt="" class="scan-icon" />
              located at the menu bar and scan the QR code
            </li>
          </ol>
        </ion-list>

        <ion-button class="video-guide-btn" (click)="openVideoGuide()">
          <span>Watch video guide</span>
          <span class="play-circle"
            ><img src="assets/ndi/hoverPlayButton.svg" alt="play"
          /></span>
        </ion-button>

        <div style="margin-top: 12px">
          <ion-button
            expand="block"
            fill="outline"
            mode="ios"
            style="
              width: 80%;
              --background: transparent;
              --background-activated: #124143;
              --border-width: 2px;
              --border-color: #5ac994;
              --border-radius: 8px;
              --padding-top: 0;
              --padding-bottom: 0;
              --padding-right: 30px;
              --padding-left: 30px;
              color: #ffffff;
              display: flex;
              justify-content: center;
              flex-direction: row;
            "
            (click)="tryAgain()"
          >
            <p
              style="
                font-size: 16px;
                font-weight: 600;
                color: #000;
                text-align: left;
                margin: 0;
              "
            >
              Refresh QR
            </p>
          </ion-button>
        </div>

        <div style="margin-top: 30px">
          <p style="margin: 0; color: #000">
            Don't have the Bhutan NDI Wallet?
          </p>
          <p style="color: #5ac994; margin: 0">Download Now!</p>
        </div>

        <div
          style="
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
          "
        >
          <a
            href="https://play.google.com/store/search?q=bhutan%20ndi&c=apps&hl=en_IN&gl=US"
          >
            <img
              src="https://www.citizenservices.gov.bt/NDI/assets/PlayStore.png"
              className="h-[37px]"
            />
          </a>
          <a href="https://apps.apple.com/in/app/bhutan-ndi/id1645493166">
            <img
              src="https://www.citizenservices.gov.bt/NDI/assets/AppStore.png"
              className="h-[37px]"
            />
          </a>
        </div>

        <div>
          <p style="margin: 0; margin-top: 30px; color: #5ac994">Get support</p>
        </div>

        <div
          style="
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
            color: #000;
          "
        >
          <p style="margin: 0; display: flex; align-items: center">
            <img
              src="assets/ndi/Mail.svg"
              alt=""
              style="
                display: inline-flex;
                width: 20px;
                height: 20px;
                margin-right: 5px;
              "
            />ndifeedbach&#64;dhi.bt
          </p>
          <p style="margin: 0; display: flex; align-items: center">
            <img
              src="assets/ndi/Call.svg"
              alt=""
              style="
                display: inline-flex;
                width: 20px;
                height: 20px;
                margin-right: 5px;
              "
            />1199
          </p>
        </div>
      </div>

      <!-- template shown after “Access Denied” -->
      <ng-template #deniedTpl>
        <h3 class="ion-text-danger"></h3>
        <ion-button (click)="tryAgain()">Try again</ion-button>
      </ng-template>
    </div>
  </ion-content>
</div>
